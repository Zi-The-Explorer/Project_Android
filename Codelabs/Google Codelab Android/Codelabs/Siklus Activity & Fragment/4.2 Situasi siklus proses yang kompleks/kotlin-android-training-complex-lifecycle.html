<!doctype html>
<html 
      lang="id"
      dir="ltr">
  <head>
    <meta name="google-signin-client-id" content="721724668570-nbkv1cfusk7kk4eni4pjvepaus73b13t.apps.googleusercontent.com">
    <meta name="google-signin-scope"
          content="profile email https://www.googleapis.com/auth/developerprofiles https://www.googleapis.com/auth/developerprofiles.award">
    <meta property="og:site_name" content="Android Developers">
    <meta property="og:type" content="website"><meta name="theme-color" content="#3ddc84"><meta charset="utf-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="manifest" href="/_pwa/android/manifest.json"
          crossorigin="use-credentials">
    <link rel="preconnect" href="//www.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="//fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="//apis.google.com" crossorigin>
    <link rel="preconnect" href="//www.google-analytics.com" crossorigin><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap">
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Material+Icons&display=block"><link rel="stylesheet" href="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/css/app.css">
      <link rel="shortcut icon" href="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/favicon.png">
    <link rel="apple-touch-icon" href="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/touchicon-180.png"><link rel="canonical" href="https://developer.android.com/codelabs/kotlin-android-training-complex-lifecycle?hl=id"><link rel="search" type="application/opensearchdescription+xml"
            title="Android Developers" href="https://developer.android.com/s/opensearch.xml">
      

<title>Android Kotlin Fundamentals: Complex Lifecycle Situations</title>

<meta property="og:title" content="Android Kotlin Fundamentals: Complex Lifecycle Situations"><meta name="description" content="In this codelab, you learn how to manage complex lifecycle situations.">
  <meta property="og:description" content="In this codelab, you learn how to manage complex lifecycle situations."><meta property="og:url" content="https://developer.android.com/codelabs/kotlin-android-training-complex-lifecycle?hl=id"><meta property="og:image" content="https://developer.android.com/images/social/android-developers.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="675"><meta property="og:locale" content="en"><meta name="twitter:card" content="summary_large_image">
  <meta name="xsrf_token" content="pAjc30sJslr2tDzxX2M3osFwyNNfd47ud9rFni3cOkw6MTYyNzQ4MTY1MDEwOTUzMA">
  

  <meta name="session_expiry" content="1627483460">
  
    
    
    
    
    
    
      
    
    <meta name="original_source" content="https://docs.google.com/document/d/1jn93N7G6t90pBKMkxgxdBR9YtA6WXXl5igXW_mmYFQ0/edit" />
    
    
    
    
    
      
    
    
    
  

    </head>
  <body class="devsite-full-width-page"
        template="codelab"
        theme="android-theme"
        type="codelab"
        
        layout="full"
        
        
        pending>
    <devsite-progress type="indeterminate" id="app-progress"></devsite-progress>
  
    <section class="devsite-wrapper"><devsite-header>
  
    


























<div class="devsite-header--inner nocontent">
  <div class="devsite-top-logo-row-wrapper-wrapper">
    <div class="devsite-top-logo-row-wrapper">
      <div class="devsite-top-logo-row">
        <button type="button" id="devsite-hamburger-menu"
          class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
          data-category="Site-Wide Custom Events"
          data-label="Navigation menu button"
          visually-hidden
          aria-label="Open menu">
        </button>
        <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">

  <img src="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/lockup.svg" class="devsite-site-logo"
       alt="Android Developers">

</a>



  
  
  <span class="devsite-product-name">
    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
  </span>

</div>
        <div class="devsite-top-logo-row-middle">
          <div class="devsite-header-upper-tabs">
            
              
              
  <devsite-tabs class="upper-tabs">

    <nav class="devsite-tabs-wrapper" aria-label="Tab atas">
      
        
          <tab  >
            <a href="https://developer.android.com/about"
   class="gc-analytics-event "
   track-type="nav"
   track-name="platform"
   track-metadata-eventdetail="https://developer.android.com/about"
   track-metadata-position="nav - platform"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Platform"
   >
  Platform
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/studio"
   class="gc-analytics-event "
   track-type="nav"
   track-name="android studio"
   track-metadata-eventdetail="https://developer.android.com/studio"
   track-metadata-position="nav - android studio"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Android Studio"
   >
  Android Studio
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/distribute"
   class="gc-analytics-event "
   track-type="nav"
   track-name="google play"
   track-metadata-eventdetail="https://developer.android.com/distribute"
   track-metadata-position="nav - google play"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Google Play"
   >
  Google Play
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/jetpack"
   class="gc-analytics-event "
   track-type="nav"
   track-name="jetpack"
   track-metadata-eventdetail="https://developer.android.com/jetpack"
   track-metadata-position="nav - jetpack"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Jetpack"
   >
  Jetpack
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/kotlin"
   class="gc-analytics-event "
   track-type="nav"
   track-name="kotlin"
   track-metadata-eventdetail="https://developer.android.com/kotlin"
   track-metadata-position="nav - kotlin"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Kotlin"
   >
  Kotlin
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/docs"
   class="gc-analytics-event "
   track-type="nav"
   track-name="dokumen"
   track-metadata-eventdetail="https://developer.android.com/docs"
   track-metadata-position="nav - dokumen"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Dokumen"
   >
  Dokumen
</a>

          </tab>
        
      
        
          <tab  >
            <a href="https://developer.android.com/news"
   class="gc-analytics-event "
   track-type="nav"
   track-name="berita"
   track-metadata-eventdetail="https://developer.android.com/news"
   track-metadata-position="nav - berita"
   track-metadata-module="primary nav"
   
   
     data-category="Site-Wide Custom Events"
   
     data-label="Tab: Berita"
   >
  Berita
</a>

          </tab>
        
      
    </nav>

  </devsite-tabs>

            
           </div>
          
<devsite-search
    aria-expanded="false"
    aria-haspopup="listbox"
    enable-signin
    enable-search
    enable-suggestions
      enable-query-completion
    
    project-name="Developer Android"
    tenant-name="Android Developers"
    
    
    
    
    
    role="combobox">
  <form class="devsite-search-form" action="https://developer.android.com/s/results" method="GET">
    <div class="devsite-search-container">
      <div class="devsite-searchbox">
        <input
          aria-activedescendant=""
          aria-autocomplete="list"
          
          aria-label="Penelusuran"
          aria-haspopup="false"
          aria-multiline="false"
          aria-label="Kotak penelusuran"
          autocomplete="off"
          class="devsite-search-field devsite-search-query"
          name="q"
          
          placeholder="Penelusuran"
          role="searchbox"
          type="text"
          value=""
          >
        <div class="devsite-search-image material-icons" aria-hidden="true"></div>
      </div>
      <button type="button"
              search-open
              class="devsite-search-button devsite-header-icon-button button-flat material-icons"
              
              aria-label="Buka penelusuran"></button>
    </div>
  </form>
  <button type="button"
          search-close
          class="devsite-search-button devsite-header-icon-button button-flat material-icons"
          
          aria-label="Tutup penelusuran"></button>
</devsite-search>

        </div>

        

        

        
<devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    
    <select aria-label="Pilih preferensi bahasa Anda."
            class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
    
    
      <option value="en"
              lang="en"
              track-metadata-original-language="id"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
    
      <option value="id"
              lang="id"
              track-metadata-original-language="id"
              track-metadata-selected-language="id"
              track-name="changed"
              track-type="languageSelector"
            
              selected="selected"
            >
        Bahasa Indonesia
      </option>
    
      <option value="es_419"
              lang="es_419"
              track-metadata-original-language="id"
              track-metadata-selected-language="es_419"
              track-name="changed"
              track-type="languageSelector"
            >
        Español – América Latina
      </option>
    
      <option value="pt_br"
              lang="pt_br"
              track-metadata-original-language="id"
              track-metadata-selected-language="pt_br"
              track-name="changed"
              track-type="languageSelector"
            >
        Português – Brasil
      </option>
    
      <option value="zh_cn"
              lang="zh_cn"
              track-metadata-original-language="id"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
    
      <option value="ja"
              lang="ja"
              track-metadata-original-language="id"
              track-metadata-selected-language="ja"
              track-name="changed"
              track-type="languageSelector"
            >
        日本語
      </option>
    
      <option value="ko"
              lang="ko"
              track-metadata-original-language="id"
              track-metadata-selected-language="ko"
              track-name="changed"
              track-type="languageSelector"
            >
        한국어
      </option>
    
    </select>
  </devsite-select>
</devsite-language-selector>


        

        
          
          
          <devsite-user signed-in
                        
                        
                          enable-profiles
                        
                        
                          
                        id="devsite-user"></devsite-user>
           
        
      </div>
    </div>
  </div>



  <div class="devsite-collapsible-section
    
      devsite-header-no-lower-tabs
    ">
    <div class="devsite-header-background">
      
        
      
      
    </div>
  </div>

</div>



  
</devsite-header>
      <devsite-book-nav scrollbars hidden>
        
          
























<nav class="devsite-book-nav devsite-nav nocontent"
     aria-label="Menu samping">
  <div class="devsite-mobile-header">
    <button type="button"
            id="devsite-close-nav"
            class="devsite-header-icon-button button-flat material-icons gc-analytics-event"
            data-category="Site-Wide Custom Events"
            data-label="Close navigation"
            aria-label="Close navigation">
    </button>
    <div class="devsite-product-name-wrapper">

  <a href="/" class="devsite-site-logo-link gc-analytics-event"
   data-category="Site-Wide Custom Events" data-label="Site logo" track-type="globalNav"
   track-name="androidDevelopers" track-metadata-position="nav"
   track-metadata-eventDetail="nav">

  <img src="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/lockup.svg" class="devsite-site-logo" alt="Android Developers">

</a>


  
      <span class="devsite-product-name">
        
        
        <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
      
    
  </li>
  
</ul>
      </span>
    

</div>
  </div>

  <div class="devsite-book-nav-wrapper">
    <div class="devsite-mobile-nav-top">
      
        <ul class="devsite-nav-list">
          
            <li class="devsite-nav-item">
              
  
  <a href="/about"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Platform"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="platform">
  
    <span class="devsite-nav-text" tooltip >
      Platform
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/studio"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Android Studio"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="androidStudio">
  
    <span class="devsite-nav-text" tooltip >
      Android Studio
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/distribute"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Google Play"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="googlePlay">
  
    <span class="devsite-nav-text" tooltip >
      Google Play
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/jetpack"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Jetpack"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="jetpack">
  
    <span class="devsite-nav-text" tooltip >
      Jetpack
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/kotlin"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Kotlin"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="kotlin">
  
    <span class="devsite-nav-text" tooltip >
      Kotlin
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/docs"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Dokumen"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="dokumen">
  
    <span class="devsite-nav-text" tooltip >
      Dokumen
   </span>
    
  
  </a>
  

  
              
            </li>
          
            <li class="devsite-nav-item">
              
  
  <a href="/news"
    
       class="devsite-nav-title gc-analytics-event
              
              "
    

    
     data-category="Site-Wide Custom Events"
     data-label="Responsive Tab: Berita"
     track-type="globalNav"
     track-metadata-eventDetail="globalMenu"
     track-metadata-position="nav"
     track-name="berita">
  
    <span class="devsite-nav-text" tooltip >
      Berita
   </span>
    
  
  </a>
  

  
              
            </li>
          
          
          
        </ul>
      
    </div>
    
  </div>
</nav>
        
      </devsite-book-nav>
      <section id="gc-wrapper">
        <main role="main" class="devsite-main-content"
            
            >
          
          <devsite-toc class="devsite-nav"
                       role="navigation"
                       aria-label="Daftar isi"
            disabled></devsite-toc>
          <devsite-content>
            
              

















<article class="devsite-article"><style>
      body {
        transition: opacity ease-in 0.2s;
      }

      body[unresolved] {
        opacity: 0;
        display: block;
        overflow: hidden;
        position: relative;
      }
      </style>
  
  
  

  <div class="devsite-article-meta nocontent" role="navigation">
    
    
    <ul class="devsite-breadcrumb-list"
  >
  
  <li class="devsite-breadcrumb-item
             ">
    
    
    
      
  <a href="https://developer.android.com/"
      
        class="devsite-breadcrumb-link gc-analytics-event"
      
        data-category="Site-Wide Custom Events"
      
        data-label="Breadcrumbs"
      
        data-value="1"
      
        track-type="globalNav"
      
        track-name="breadcrumb"
      
        track-metadata-position="1"
      
        track-metadata-eventdetail="Developer Android"
      
    >
    
        Developer Android
      
  </a>
  
    
  </li>
  
</ul>
    
  </div>
  
  
    <h1 class="devsite-page-title">Android Kotlin Fundamentals: Complex Lifecycle Situations</h1><devsite-bookmark></devsite-bookmark>
  

  <devsite-toc class="devsite-nav" devsite-toc-embedded
               disabled>
  </devsite-toc>

  

  <div class="devsite-article-body clearfix
    ">

    
      
    <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
    <google-codelab codelab-gaid="UA-81734179-1"
                    doc-id="1jn93N7G6t90pBKMkxgxdBR9YtA6WXXl5igXW_mmYFQ0"
                    id="kotlin-android-training-complex-lifecycle"
                    title="Android Kotlin Fundamentals: Complex Lifecycle Situations"
                    environment="web"
                    category="android,kotlin"
                    feedback-link="https://github.com/google-developer-training/android-kotlin-fundamentals-apps/issues/new?assignees=&amp;labels=&amp;template=android-kotlin-fundamentals.md&amp;title=Android&#43;Kotlin&#43;Fundamentals&#43;codelab%3A&#43;"
                    >
      
        <google-codelab-step label="Welcome" duration="0">
          
            <google-codelab-about codelab-title="Android Kotlin Fundamentals: Complex Lifecycle Situations"
                                  authors="Google Developers Training team"
                                  >
            </google-codelab-about>
          
          <p>This codelab is part of the Android Kotlin Fundamentals course. You&#39;ll get the most value out of this course if you work through the codelabs in sequence. All the course codelabs are listed on the  <a href="https://codelabs.developers.google.com/android-kotlin-fundamentals/" target="_blank">Android Kotlin Fundamentals codelabs landing page</a>.</p>
<h2 is-upgraded id="introduction" data-text="Introduction"><strong>Introduction</strong></h2>
<p>In the last codelab, you learned about the <code translate="no" dir="ltr">Activity</code> and <code translate="no" dir="ltr">Fragment</code> lifecycles, and you explored the methods that are called when the lifecycle state changes in activities and fragments. In this codelab, you will explore the activity lifecycle in greater detail. You will also learn about Android Jetpack&#39;s lifecycle library, which can help you manage lifecycle events with code that&#39;s better organized and easier to maintain.</p>
<h2 is-upgraded id="what-you-should-already-know" data-text="What you should already know"><strong>What you should already know</strong></h2>
<ul>
<li>What an activity is, and how to create one in your app.</li>
<li>The basics of the <code translate="no" dir="ltr">Activity</code> and <code translate="no" dir="ltr">Fragment</code> lifecycles, and the callbacks that are invoked when an activity moves between states.</li>
<li>How to override the <code translate="no" dir="ltr">onCreate()</code> and <code translate="no" dir="ltr">onStop()</code> lifecycle callback methods to perform operations at different times in the activity or fragment lifecycle.</li>
</ul>
<h2 class="checklist" is-upgraded id="what-youll-learn" data-text="What you'll learn"><strong>What you'll learn</strong></h2>
<ul class="checklist">
<li>How to set up, start, and stop parts of your app in the lifecycle callbacks.</li>
<li>How to use the Android lifecycle library to create a lifecycle observer, and make the activity and fragment lifecycle easier to manage.</li>
<li>How Android process shutdowns affect the data in your app, and how to save and restore that data automatically when Android closes your app.</li>
<li>How device rotation and other configuration changes create changes to lifecycle states and affect the state of your app.</li>
</ul>
<h2 is-upgraded id="what-youll-do" data-text="What you'll do"><strong>What you'll do</strong></h2>
<ul>
<li>Modify the DessertClicker app to include a timer function, and start and stop that timer at various times in the activity lifecycle.</li>
<li>Modify the app to use the Android lifecycle library, and convert the <code translate="no" dir="ltr">DessertTimer</code> class into a lifecycle observer.</li>
<li>Set up and use the Android Debug Bridge (<code translate="no" dir="ltr">adb</code>) to simulate your app&#39;s process shutdown and the lifecycle callbacks that occur then.</li>
<li>Implement the <code translate="no" dir="ltr">onSaveInstanceState()</code> method to retain app data that may be lost if the app is unexpectedly closed. Add code to restore that data when the app starts again.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="App overview" duration="0">
          
          <p>In this codelab, you expand on the DessertClicker app from the previous codelab. You add a background timer, then convert the app to use the  <a href="https://developer.android.com/topic/libraries/architecture/lifecycle" target="_blank">Android lifecycle library</a>.</p>
<p class="image-container"><img alt="5f5803e64f578dd5.png" style="width: 347.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/5f5803e64f578dd5.png"></p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Avoid lifecycle mistakes" duration="0">
          
          <p>In the previous codelab, you learned how to observe the activity and fragment lifecycles by overriding various lifecycle callbacks, and logging when the system invokes those callbacks. In this task, you explore a more complex example of managing lifecycle tasks in the DessertClicker app. You use a timer that prints a log statement every second, with the count of the number of seconds it has been running.</p>
<h2 is-upgraded id="step-1:-set-up-desserttimer" data-text="Step 1: Set up DessertTimer"><strong>Step 1: Set up DessertTimer</strong></h2>
<ol type="1">
<li>Open the DessertClicker app from the last codelab. (You can  <a href="https://github.com/google-developer-training/android-kotlin-fundamentals-apps/tree/master/DessertClickerLogs" target="_blank">download DessertClickerLogs here</a> if you don&#39;t have the app.)</li>
<li>In the <strong>Project</strong> view, expand j<strong>ava &gt; com.example.android.dessertclicker</strong> and open <code translate="no" dir="ltr">DessertTimer.kt</code>. Notice that right now all the code is commented out, so it doesn&#39;t run as part of the app.</li>
<li>Select all the code in the editor window. Select <strong>Code &gt; Comment with Line Comment</strong>, or press <code translate="no" dir="ltr">Control+/</code> (<code translate="no" dir="ltr">Command+/</code> on a Mac). This command uncomments all the code in the file. (Android Studio might show unresolved reference errors until you rebuild the app.)</li>
<li>Notice that the <code translate="no" dir="ltr">DessertTimer</code> class includes <code translate="no" dir="ltr">startTimer()</code> and <code translate="no" dir="ltr">stopTimer()</code>, which start and stop the timer. When <code translate="no" dir="ltr">startTimer()</code> is running, the timer prints a log message every second, with the total count of the seconds the time has been running. The <code translate="no" dir="ltr">stopTimer()</code> method, in turn, stops the timer and the log statements.</li>
</ol>
<aside class="special"><p><strong>Note:</strong> The <code translate="no" dir="ltr">DessertTimer</code> class uses a background thread for the timer, with associated <code translate="no" dir="ltr">Runnable</code> and <code translate="no" dir="ltr">Handler</code> classes. You don&#39;t need to know about these things for this codelab (although you learn more about threads in a later codelab). See  <a href="https://developer.android.com/guide/components/processes-and-threads" target="_blank">Processes and threads</a> for more details if you are interested.</p>
</aside>
<ol type="1" start="5">
<li>Open <code translate="no" dir="ltr">MainActivity.kt</code>. At the top of the class, just below the <code translate="no" dir="ltr">dessertsSold</code> variable, add a variable for the timer:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">private lateinit var dessertTimer: DessertTimer
</code></pre>
<ol type="1" start="6">
<li>Scroll down to <code translate="no" dir="ltr">onCreate()</code> and create a new <code translate="no" dir="ltr">DessertTimer</code> object, just after the call to <code translate="no" dir="ltr">setOnClickListener()</code>:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">dessertTimer = DessertTimer()
</code></pre>
<p>Now that you have a dessert timer object, consider where you should start and stop the timer to get it to run <strong>only</strong> when the activity is on-screen. You look at a few options in the next steps.</p>
<h2 is-upgraded id="step-2:-start-and-stop-the-timer" data-text="Step 2: Start and stop the timer"><strong>Step 2: Start and stop the timer</strong></h2>
<p>The <code translate="no" dir="ltr">onStart()</code> method is called just before the activity becomes visible. The <code translate="no" dir="ltr">onStop()</code> method is called after the activity stops being visible. These callbacks seem like good candidates for when to start and stop the timer.</p>
<ol type="1">
<li>In the <code translate="no" dir="ltr">MainActivity</code> class, start the timer in the <code translate="no" dir="ltr">onStart()</code> callback:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">override fun onStart() {
   super.onStart()
   dessertTimer.startTimer()

   Timber.i(&#34;onStart called&#34;)
}
</code></pre>
<ol type="1" start="2">
<li>Stop the timer in <code translate="no" dir="ltr">onStop()</code>:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">override fun onStop() {
   super.onStop()
   dessertTimer.stopTimer()

   Timber.i(&#34;onStop Called&#34;)
}
</code></pre>
<ol type="1" start="3">
<li>Compile and run the app. In Android Studio, click the <strong>Logcat</strong> pane. In the Logcat search box, enter <code translate="no" dir="ltr">dessertclicker</code>, which will filter by both the <code translate="no" dir="ltr">MainActivity</code> and <code translate="no" dir="ltr">DessertTimer</code> classes. Notice that once the app starts, the timer also starts running immediately. <img alt="a399e0fea061361e.png" style="width: 624.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/a399e0fea061361e.png"></li>
<li>Click the <strong>Back</strong> button and notice that the timer stops again. The timer stops because both the activity and the timer it controls have been destroyed.</li>
<li>Use the recents screen to return to the app. Notice in Logcat that the timer restarts from 0.</li>
<li>Click the <strong>Share</strong> button. Notice in Logcat that the timer is still running. <img alt="e2319779260eb5ee.png" style="width: 349.50px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/e2319779260eb5ee.png"></li>
<li>Click the <strong>Home</strong> button. Notice in Logcat the timer stops running.</li>
<li>Use the recents screen to return to the app. Notice in Logcat the timer starts up again from where it left off because we called <code translate="no" dir="ltr">startTimer()</code> in the <code translate="no" dir="ltr">onStart()</code> method.</li>
<li>In <code translate="no" dir="ltr">MainActivity</code>, in the <code translate="no" dir="ltr">onStop()</code> method, comment out the call  to <code translate="no" dir="ltr">stopTimer()</code>. Commenting out <code translate="no" dir="ltr">stopTimer()</code> demonstrates the case where you start an operation in <code translate="no" dir="ltr">onStart()</code>, but forget to stop it again in <code translate="no" dir="ltr">onStop()</code>.</li>
<li>Compile and run the app, and click the Home button after the timer starts. Even though the app is in the background, the timer is running, and continually using system resources. Having the timer continue may unnecessarily use computing resources on your phone, and probably not the behavior you want.</li>
</ol>
<p>The general pattern is when you set up or start something in a callback, you stop or remove that thing in a corresponding callback. This way, you avoid having anything running when it&#39;s no longer needed.</p>
<aside class="special"><p><strong>Note:</strong> In some cases, such as music playback, you want to keep the thing running. There are proper and efficient ways to keep something running, but they are beyond the scope of this lesson.</p>
</aside>
<ol type="1" start="11">
<li>Uncomment the line in <code translate="no" dir="ltr">onStop()</code> where you stop the timer.</li>
<li>Cut and paste the <code translate="no" dir="ltr">startTimer()</code> call from <code translate="no" dir="ltr">onStart()</code> to <code translate="no" dir="ltr">onCreate()</code>. This change demonstrates the case where you both initialize and start a resource in <code translate="no" dir="ltr">onCreate()</code>, rather than using <code translate="no" dir="ltr">onCreate()</code> to initialize it and  <code translate="no" dir="ltr">onStart()</code> to start it.</li>
<li>Compile and run the app. Notice that the timer starts running, as you would expect.</li>
<li>Click Home to stop the app. The timer stops running, as you would expect.</li>
<li>Use the recents screen to return to the app. Notice that the timer does <strong>not</strong> start again in this case, because <code translate="no" dir="ltr">onCreate()</code> is only called when the app starts—it&#39;s not called when an app returns to the foreground.</li>
</ol>
<p>Key points to remember:</p>
<ul>
<li>When you set up a resource in a lifecycle callback, also tear the resource down.</li>
<li>Do setup and teardown in corresponding methods.</li>
<li>If you set up something in <code translate="no" dir="ltr">onStart()</code>, stop or tear it down again in <code translate="no" dir="ltr">onStop()</code>.</li>
</ul>
<p class="image-container"><img alt="f6b25a71cec4e401.png" style="width: 279.50px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/f6b25a71cec4e401.png"></p>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Use the Android lifecycle library" duration="0">
          
          <p>In the DessertClicker app, it&#39;s fairly easy to see that if you started the timer in <code translate="no" dir="ltr">onStart()</code>, then you need to stop the timer in <code translate="no" dir="ltr">onStop()</code>. There&#39;s only one timer, so stopping the timer is not difficult to remember.</p>
<p>In a more complex Android app, you might set up many things in <code translate="no" dir="ltr">onStart()</code> or <code translate="no" dir="ltr">onCreate()</code>, then tear them all down in <code translate="no" dir="ltr">onStop()</code> or <code translate="no" dir="ltr">onDestroy()</code>. For example, you might have animations, music, sensors, or timers that you need to both set up and tear down, and start and stop. If you forget one, that leads to bugs and headaches.</p>
<p>The <em>lifecycle library</em>, which is part of  <a href="https://developer.android.com/jetpack" target="_blank">Android Jetpack</a>, simplifies this task. The library is especially useful in cases where you have to track many moving parts, some of which are at different lifecycle states. The library flips around the way lifecycles work: Usually the activity or fragment tells a component (such as <code translate="no" dir="ltr">DessertTimer</code>) what to do when a lifecycle callback occurs. But when you use the lifecycle library, the component itself watches for lifecycle changes, then does what&#39;s needed when those changes happen.</p>
<p>There are three main parts of the lifecycle library:</p>
<ul>
<li>Lifecycle <em>owners</em>, which are the components that have (and &#34;own&#34;) a lifecycle. <code translate="no" dir="ltr">Activity</code> and <code translate="no" dir="ltr">Fragment</code> are lifecycle owners. Lifecycle owners implement the <code translate="no" dir="ltr">LifecycleOwner</code> interface.</li>
<li>The <code translate="no" dir="ltr">Lifecycle</code> class, which holds the actual state of a lifecycle owner and triggers events when lifecycle changes happen.</li>
<li>Lifecycle <em>observers</em>, which observe the lifecycle state and perform tasks when the lifecycle changes. Lifecycle observers implement the <code translate="no" dir="ltr">LifecycleObserver</code> interface.</li>
</ul>
<p>In this task, you convert the DessertClicker app to use the Android lifecycle library, and learn how the library makes working with the Android activity and fragment lifecycles easier to manage.</p>
<h2 is-upgraded id="step-1:-turn-desserttimer-into-a-lifecycleobserver" data-text="Step 1: Turn DessertTimer into a LifecycleObserver"><strong>Step 1: Turn DessertTimer into a LifecycleObserver</strong></h2>
<p>A key part of the lifecycle library is the concept of <em>lifecycle observation</em>. Observation enables classes (such as <code translate="no" dir="ltr">DessertTimer</code>) to know about the activity or fragment lifecycle, and start and stop themselves in response to changes to those lifecycle states. With a lifecycle observer, you can remove the responsibility of starting and stopping objects from the activity and fragment methods.</p>
<ol type="1">
<li>Open the <code translate="no" dir="ltr">DesertTimer.kt</code> class.</li>
<li>Change the class signature of the <code translate="no" dir="ltr">DessertTimer</code> class to look like this:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">class DessertTimer(lifecycle: Lifecycle) : LifecycleObserver {
</code></pre>
<p>This new class definition does two things:</p>
<ul>
<li>The constructor takes a <code translate="no" dir="ltr">Lifecycle</code> object, which is the lifecycle that the timer is observing.</li>
<li>The class definition implements the <code translate="no" dir="ltr">LifecycleObserver</code> interface.</li>
</ul>
<ol type="1" start="3">
<li>Below the declaration of the <code translate="no" dir="ltr">runnable</code> variable in the <code translate="no" dir="ltr">DessertTimer</code> class, add an <code translate="no" dir="ltr">init</code> block to the class definition. In the <code translate="no" dir="ltr">init</code> block, use the <code translate="no" dir="ltr">addObserver()</code> method to connect the lifecycle object passed in from the owner (the activity) to this class (the observer).</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr"> init {
   lifecycle.addObserver(this)
}
</code></pre>
<ol type="1" start="4">
<li>Annotate <code translate="no" dir="ltr">startTimer()</code> with the <code translate="no" dir="ltr">@OnLifecycleEvent</code> annotation, and use the <code translate="no" dir="ltr">ON_START</code> lifecycle event. All the lifecycle events that your lifecycle observer can observe are in the  <a href="https://developer.android.com/reference/android/arch/lifecycle/Lifecycle.Event.html" target="_blank"><code translate="no" dir="ltr">Lifecycle.Event</code></a> class.  For example, the <code translate="no" dir="ltr">@OnLifecycleEvent(Lifecycle.Event.ON_START)</code>annotation indicates that the following method is watching for <code translate="no" dir="ltr">onStart</code> lifecycle events</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">@OnLifecycleEvent(Lifecycle.Event.ON_START)
fun startTimer() {
</code></pre>
<ol type="1" start="5">
<li>Do the same thing to <code translate="no" dir="ltr">stopTimer()</code>, using the <code translate="no" dir="ltr">ON_STOP</code> event:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">@OnLifecycleEvent(Lifecycle.Event.ON_STOP)
fun stopTimer()
</code></pre>
<h2 is-upgraded id="step-2:-modify-mainactivity" data-text="Step 2: Modify MainActivity"><strong>Step 2: Modify MainActivity</strong></h2>
<p>Your <code translate="no" dir="ltr">MainActivity</code> class is already a lifecycle owner through object-oriented inheritance.  Notice <code translate="no" dir="ltr">MainActivity</code> subclasses from <code translate="no" dir="ltr">AppCompatActivity,</code> which in turn subclasses from <code translate="no" dir="ltr">FragmentActivity</code>.  Since the <code translate="no" dir="ltr">FragmentActivity</code> superclass implements <code translate="no" dir="ltr">LifecycleOwner</code>, there&#39;s nothing more you need to do to make your activity lifecycle-aware. All you have to do is pass the activity&#39;s lifecycle object into the <code translate="no" dir="ltr">DessertTimer</code> constructor.</p>
<ol type="1">
<li>Open <code translate="no" dir="ltr">MainActivity</code>. In the <code translate="no" dir="ltr">onCreate()</code> method, modify the initialization of <code translate="no" dir="ltr">DessertTimer</code> to include <code translate="no" dir="ltr">this.lifecycle</code>:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">dessertTimer = DessertTimer(this.lifecycle)
</code></pre>
<p>The <code translate="no" dir="ltr">lifecycle</code> property of the activity holds the <code translate="no" dir="ltr">Lifecycle</code> object this activity owns.</p>
<ol type="1" start="2">
<li>Remove the call to <code translate="no" dir="ltr">startTimer()</code> in <code translate="no" dir="ltr">onCreate()</code>, and the call to <code translate="no" dir="ltr">stopTimer()</code> in <code translate="no" dir="ltr">onStop()</code>. You don&#39;t need to tell <code translate="no" dir="ltr">DessertTimer</code> what to do in the activity anymore, because <code translate="no" dir="ltr">DessertTimer</code> is now observing the lifecycle itself and is automatically notified when the lifecycle state changes. All you do in these callbacks now is log a message.</li>
<li>Compile and run the app, and open the Logcat. Notice that the timer has started running, as expected.  <img alt="a399e0fea061361e.png" style="width: 624.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/a399e0fea061361e.png"></li>
<li>Click the home button to put the app into the background. Notice that the timer has stopped running, as expected.</li>
</ol>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Simulate app shutdown and use onSaveInstanceState()" duration="0">
          
          <p>What happens to your app and its data if Android shuts down that app while it is in the background? This tricky edge case is important to understand.</p>
<p>When your app goes into the background, it&#39;s not destroyed, it&#39;s only stopped and waiting for the user to return to it. But one of the Android OS&#39;s main concerns is keeping the activity that&#39;s in the foreground running smoothly. For example, if your user is using a GPS app to help them catch a bus, it&#39;s important to render that GPS app quickly and keep showing the directions. It&#39;s less important to keep the DessertClicker app, which the user might not have looked at for a few days, running smoothly in the background.</p>
<p>Android regulates background apps so that the foreground app can run without problems. For example, Android limits the amount of processing that apps running in the background can do.</p>
<p>Sometimes Android even shuts down an entire app process, which includes every activity associated with the app. Android does this kind of shutdown when the system is stressed and in danger of visually lagging, so no additional callbacks or code is run at this point. Your app&#39;s process is simply shut down, silently, in the background. But to the user, it doesn&#39;t look like the app has been closed. When the user navigates back to an app that the Android OS has shut down, Android restarts that app.</p>
<p>In this task, you simulate an Android process shutdown and examine what happens to your app when it starts up again.</p>
<aside class="special"><p><strong>Note:</strong>  Before you start, make sure you are running an emulator or device that supports API 28 or higher.</p>
</aside>
<h2 is-upgraded id="step-1:-use-adb-to-simulate-a-process-shutdown" data-text="Step 1: Use adb to simulate a process shutdown"><strong>Step 1: Use adb to simulate a process shutdown</strong></h2>
<p>The Android Debug Bridge (<code translate="no" dir="ltr">adb</code>) is a command-line tool that lets you send instructions to emulators and devices attached to your computer. In this step, you use <code translate="no" dir="ltr">adb</code> to close your app&#39;s process and see what happens when Android shuts down your app.</p>
<ol type="1">
<li>Compile and run your app. Click the cupcake a few times.</li>
<li>Press the Home button to put your app into the background. Your app is now stopped, and the app is subject to being closed if Android needs the resources that the app is using.</li>
<li>In Android Studio, click the <strong>Terminal</strong> tab to open the command-line terminal.</li>
</ol>
<p class="image-container"><img alt="a37c3740cc57b67d.png" style="width: 624.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/a37c3740cc57b67d.png"></p>
<ol type="1" start="4">
<li>Type <code translate="no" dir="ltr">adb</code> and press Return.</li>
</ol>
<p>If you see a lot of output that begins with <code translate="no" dir="ltr">Android Debug Bridge version X.XX.X</code> and ends with <code translate="no" dir="ltr">tags to be used by logcat (see logcat --help)</code>, everything is fine. If instead you see <code translate="no" dir="ltr">adb: command not found</code>, make sure the <code translate="no" dir="ltr">adb</code> command is available in your execution path. For instructions, see &#34;Add adb to your execution path&#34; in the <a href="https://developer.android.com/courses/extras/utilities" target="_blank"> Utilities chapter</a>.</p>
<ol type="1" start="5">
<li>Copy and paste this comment into the command line and press Return:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">adb shell am kill com.example.android.dessertclicker
</code></pre>
<p>This command tells any connected devices or emulators to send a STOP message to terminate the process with the <code translate="no" dir="ltr">dessertclicker</code> package name, but only if the app is in the background. Because your app was in the background, nothing shows on the device or emulator screen to indicate that your process has been stopped. In Android Studio, click the <strong>Run</strong> tab to see the <code translate="no" dir="ltr">onStop()</code> method called.  Click the <strong>Logcat</strong> tab to see that the <code translate="no" dir="ltr">onDestroy()</code> callback was never run—your activity simply ended.</p>
<ol type="1" start="6">
<li>Use the recents screen to return to the app. Your app appears in recents whether it has been put into the background or has been stopped altogether. When you use the recents screen to return to the app, the activity is started up again. The activity goes through the entire set of startup lifecycle callbacks, including <code translate="no" dir="ltr">onCreate()</code>.</li>
<li>Notice that when the app restarted, it resets your &#34;score&#34; (both the number of desserts sold and the total dollars) to the default values (0). If Android shut down your app, why didn&#39;t it save your state?</li>
</ol>
<p>When the OS restarts your app for you, Android tries its best to reset your app to the state it had before. Android takes the state of some of your views and saves it in a bundle whenever you navigate away from the activity. Some examples of data that&#39;s automatically saved are the text in an EditText (as long as they have an ID set in the layout), and the back stack of your activity.</p>
<p>However, sometimes the Android OS doesn&#39;t know about all your data. For example, if you have a custom variable like <code translate="no" dir="ltr">revenue</code> in the DessertClicker app, the Android OS doesn&#39;t know about this data or its importance to your activity. You need to add this data to the bundle yourself.</p>
<h2 is-upgraded id="step-2:-use-onsaveinstancestate-to-save-bundle-data" data-text="Step 2: Use onSaveInstanceState() to save bundle data"><strong>Step 2: Use onSaveInstanceState() to save bundle data</strong></h2>
<p>The <code translate="no" dir="ltr">onSaveInstanceState()</code> method is the callback you use to save any data that you might need if the Android OS destroys your app. In the lifecycle callback diagram, <code translate="no" dir="ltr">onSaveInstanceState()</code> is called after the activity has been stopped. It&#39;s called every time your app goes into the background.</p>
<p class="image-container"><img alt="c259ab6beca0ca88.png" style="width: 328.50px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/c259ab6beca0ca88.png"></p>
<p>Think of the <code translate="no" dir="ltr">onSaveInstanceState()</code> call as a safety measure; it gives you a chance to save a small amount of information to a bundle as your activity exits the foreground. The system saves this data now because if it waited until it was shutting down your app, the OS might be under resource pressure. Saving the data each time ensures that update data in the bundle is available to restore, if it is needed.</p>
<ol type="1">
<li>In <code translate="no" dir="ltr">MainActivity</code>, override the <code translate="no" dir="ltr">onSaveInstanceState()</code> callback, and add a <code translate="no" dir="ltr">Timber</code> log statement.</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">override fun onSaveInstanceState(outState: Bundle) {
   super.onSaveInstanceState(outState)

   Timber.i(&#34;onSaveInstanceState Called&#34;)
}
</code></pre>
<aside class="special"><p><strong>Note:</strong> There are two overrides for <code translate="no" dir="ltr">onSaveInstanceState()</code>, one with just an <code translate="no" dir="ltr">outState</code> parameter, and another that includes <code translate="no" dir="ltr">outState</code> and <code translate="no" dir="ltr">outPersistentState</code> parameters. Use the one shown in the code above, with the single <code translate="no" dir="ltr">outState</code> parameter.</p>
</aside>
<ol type="1" start="2">
<li>Compile and run the app, and click the <strong>Home</strong> button to put it into the background. Notice that the <code translate="no" dir="ltr">onSaveInstanceState()</code> callback occurs just after both <code translate="no" dir="ltr">onPause()</code> and <code translate="no" dir="ltr">onStop()</code>: <img alt="c80ed57c9e4e23a.png" style="width: 624.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/c80ed57c9e4e23a.png"></li>
<li>At the top of the file, just before the class definition, add these constants:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">const val KEY_REVENUE = &#34;revenue_key&#34;
const val KEY_DESSERT_SOLD = &#34;dessert_sold_key&#34;
const val KEY_TIMER_SECONDS = &#34;timer_seconds_key&#34;
</code></pre>
<p>You will use these keys for both saving and retrieving data from the instance state bundle.</p>
<ol type="1" start="4">
<li>Scroll down to <code translate="no" dir="ltr">onSaveInstanceState()</code>, and notice the <code translate="no" dir="ltr">outState</code> parameter, which is of type <code translate="no" dir="ltr">Bundle</code>.</li>
</ol>
<p>A bundle is a collection of key-value pairs, where the keys are always strings. You can put primitive values, such as <code translate="no" dir="ltr">int</code> and <code translate="no" dir="ltr">boolean</code> values, into the bundle. Because the system keeps this bundle in RAM, it&#39;s a best practice to keep the data in the bundle small. The size of this bundle is also limited, though the size varies from device to device. Generally you should store far less than 100k, otherwise you risk crashing your app with the <code translate="no" dir="ltr">TransactionTooLargeException</code> error.</p>
<ol type="1" start="5">
<li>In <code translate="no" dir="ltr">onSaveInstanceState()</code>, put the <code translate="no" dir="ltr">revenue</code> value (an integer) into the bundle with the <code translate="no" dir="ltr">putInt()</code> method:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">outState.putInt(KEY_REVENUE, revenue)
</code></pre>
<p>The <code translate="no" dir="ltr">putInt()</code> method (and similar methods from the <code translate="no" dir="ltr">Bundle</code> class like <code translate="no" dir="ltr">putFloat()</code> and <code translate="no" dir="ltr">putString()</code> takes two arguments:  a string for the key (the <code translate="no" dir="ltr">KEY_REVENUE</code> constant), and the actual value to save.</p>
<ol type="1" start="6">
<li>Repeat the same process with the number of desserts sold, and the status of the timer:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">outState.putInt(KEY_DESSERT_SOLD, dessertsSold)
outState.putInt(KEY_TIMER_SECONDS, dessertTimer.secondsCount)
</code></pre>
<h2 is-upgraded id="step-3:-use-oncreate-to-restore-bundle-data" data-text="Step 3: Use onCreate() to restore bundle data">Step 3: Use onCreate() to restore bundle data</h2>
<ol type="1">
<li>Scroll up to <code translate="no" dir="ltr">onCreate()</code>, and examine the method signature:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">override fun onCreate(savedInstanceState: Bundle?) {
</code></pre>
<p>Notice that <code translate="no" dir="ltr">onCreate()</code> gets a <code translate="no" dir="ltr">Bundle</code> each time it is called. When your activity is restarted due to a process shut-down, the bundle that you saved is passed to <code translate="no" dir="ltr">onCreate()</code>. If your activity was starting fresh, this bundle in <code translate="no" dir="ltr">onCreate()</code> is <code translate="no" dir="ltr">null</code>. So if the bundle is not <code translate="no" dir="ltr">null</code>, you know you&#39;re &#34;re-creating&#34; the activity from a previously known point.</p>
<aside class="special"><p><strong>Note:</strong> If the activity is being re-created, the <code translate="no" dir="ltr">onRestoreInstanceState()</code> callback is called after <code translate="no" dir="ltr">onStart()</code>, also with the bundle. Most of the time, you restore the activity state in <code translate="no" dir="ltr">onCreate()</code>. But because <code translate="no" dir="ltr">onRestoreInstanceState()</code> is called after <code translate="no" dir="ltr">onStart()</code>, if you ever need to restore some state after <code translate="no" dir="ltr">onCreate()</code> is called, you can use <code translate="no" dir="ltr">onRestoreInstanceState()</code>.</p>
</aside>
<ol type="1" start="2">
<li>Add this code to <code translate="no" dir="ltr">onCreate()</code>, after the <code translate="no" dir="ltr">DessertTimer</code> setup:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">if (savedInstanceState != null) {
   revenue = savedInstanceState.getInt(KEY_REVENUE, 0)
}
</code></pre>
<p>The test for <code translate="no" dir="ltr">null</code> determines whether there is data in the bundle, or if the bundle is <code translate="no" dir="ltr">null</code>, which in turn tells you if the app has been started fresh or has been re-created after a shutdown. This test is a common pattern for restoring data from the bundle.</p>
<p>Notice that the key you used here (<code translate="no" dir="ltr">KEY_REVENUE</code>) is the same key you used for <code translate="no" dir="ltr">putInt()</code>. To make sure you use the same key each time, it is a best practice to define those keys as constants. You use <code translate="no" dir="ltr">getInt()</code> to get data out of the bundle, just as you used <code translate="no" dir="ltr">putInt()</code> to put data into the bundle. The <code translate="no" dir="ltr">getInt()</code> method takes two arguments:</p>
<ul>
<li>A string that acts as the key, for example <code translate="no" dir="ltr">"key_revenue"</code> for the revenue value.</li>
<li>A default value in case no value exists for that key in the bundle.</li>
</ul>
<p>The integer you get from the bundle is then assigned to the <code translate="no" dir="ltr">revenue</code> variable, and the UI will use that value.</p>
<ol type="1" start="3">
<li>Add <code translate="no" dir="ltr">getInt()</code> methods to restore the number of desserts sold and the value of the timer:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">if (savedInstanceState != null) {
   revenue = savedInstanceState.getInt(KEY_REVENUE, 0)
   dessertsSold = savedInstanceState.getInt(KEY_DESSERT_SOLD, 0)
   dessertTimer.secondsCount =
       savedInstanceState.getInt(KEY_TIMER_SECONDS, 0)
}
</code></pre>
<ol type="1" start="4">
<li>Compile and run the app.</li>
<li>Stop the app by selecting <strong>Run</strong> &gt; <strong>Stop ‘app&#39;</strong> from the Android Studio menu. Now the app is installed on your device/emulator but the app is not running.</li>
<li>Open app launcher in your device/emulator and select <strong>Dessert Clicker</strong> app. Press the cupcake at least five times until it switches to a donut. Click Home to put the app into the background.</li>
<li>In the Android Studio <strong>Terminal</strong> tab, run <code translate="no" dir="ltr">adb</code> to shut down the app&#39;s process.</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">adb shell am kill com.example.android.dessertclicker
</code></pre>
<ol type="1" start="8">
<li>Use the recents screen to return to the app. Notice that this time the app returns with the correct revenue and desserts sold values from the bundle. But also notice that the dessert has returned to a cupcake. There&#39;s one more thing left to do to ensure that the app returns from a shutdown exactly the way it was left.</li>
<li>In <code translate="no" dir="ltr">MainActivity</code>, examine the <code translate="no" dir="ltr">showCurrentDessert()</code> method. Notice that this method determines which dessert image should be displayed in the activity based on the current number of desserts sold and the list of desserts in the <code translate="no" dir="ltr">allDesserts</code> variable.</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">for (dessert in allDesserts) {
   if (dessertsSold &gt;= dessert.startProductionAmount) {
       newDessert = dessert
   }
    else break
}
</code></pre>
<p>This method relies on the number of desserts sold to choose the right image. Therefore, you don&#39;t need to do anything to store a reference to the image in the bundle in <code translate="no" dir="ltr">onSaveInstanceState()</code>. In that bundle, you&#39;re already storing the number of desserts sold.</p>
<ol type="1" start="10">
<li>In <code translate="no" dir="ltr">onCreate()</code>, in the block that restores the state from the bundle, call <code translate="no" dir="ltr">showCurrentDessert()</code>:</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr"> if (savedInstanceState != null) {
   revenue = savedInstanceState.getInt(KEY_REVENUE, 0)
   dessertsSold = savedInstanceState.getInt(KEY_DESSERT_SOLD, 0)
   dessertTimer.secondsCount = 
      savedInstanceState.getInt(KEY_TIMER_SECONDS, 0)
   showCurrentDessert()                   
}
</code></pre>
<ol type="1" start="11">
<li>Compile and run the app.</li>
<li>Stop the app by selecting <strong>Run</strong> &gt; <strong>Stop ‘app&#39;</strong> from the Android Studio menu. Now the app is installed on your device/emulator but the app is not running.</li>
<li>Open app launcher and select <strong>Dessert Clicker</strong> app. Click on the dessert icon a few times.</li>
<li>Put the app into the background. Use <code translate="no" dir="ltr">adb</code> to shut down the process.</li>
</ol>
<pre translate="no" dir="ltr"><code translate="no" dir="ltr">adb shell am kill com.example.android.dessertclicker
</code></pre>
<ol type="1" start="15">
<li>Use the recents screen to return to the app. Note now that both the values for desserts told, total revenue, and the dessert image are correctly restored.</li>
</ol>


        </google-codelab-step>
      
        <google-codelab-step label="Task: Explore configuration changes" duration="0">
          
          <p>There&#39;s one last special case in managing the activity and fragment lifecycle that is important to understand: how configuration changes affect the lifecycle of your activities and fragments.</p>
<p>A <em>configuration change</em> happens when the state of the device changes so radically that the easiest way for the system to resolve the change is to completely shut down and rebuild the activity. For example, if the user changes the device language, the whole layout might need to change to accommodate different text directions. If the user plugs the device into a dock or adds a physical keyboard, the app layout may need to take advantage of a different display size or layout. And if the device orientation changes, for example if the device is rotated from portrait to landscape or back the other way, then the layout may need to change to fit the new orientation.</p>
<h2 is-upgraded id="step-1:-explore-device-rotation-and-the-lifecycle-callbacks" data-text="Step 1: Explore device rotation and the lifecycle callbacks"><strong>Step 1: Explore device rotation and the lifecycle callbacks</strong></h2>
<ol type="1">
<li>Compile and run your app, and open Logcat.</li>
<li>Rotate the device or emulator to landscape mode. You can rotate the emulator left or right with the rotation buttons, or with the <code translate="no" dir="ltr">Control</code> and arrow keys (<code translate="no" dir="ltr">Command</code> and arrow keys on a Mac). <img alt="623fce7c623d42bd.png" style="width: 333.50px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/623fce7c623d42bd.png"></li>
<li>Examine the output in Logcat. Filter the output on <code translate="no" dir="ltr">MainActivity</code>.</li>
</ol>
<p class="image-container"><img alt="a9e19f1f0f43fffe.png" style="width: 624.00px" src="/codelabs/kotlin-android-training-complex-lifecycle/img/a9e19f1f0f43fffe.png"></p>
<p>Notice that when the device or emulator rotates the screen, the system calls all the lifecycle callbacks to shut down the activity. Then, as the activity is re-created, the system calls all the lifecycle callbacks to start the activity.</p>
<ol type="1" start="4">
<li>In <code translate="no" dir="ltr">MainActivity</code>, comment out the entire <code translate="no" dir="ltr">onSaveInstanceState()</code> method.</li>
<li>Compile and run your app again. Click the cupcake a few times, and rotate the device or emulator. This time, when the device is rotated and the activity is shut down and re-created, the activity starts up with default values.</li>
</ol>
<p>When a configuration change occurs, Android uses the same instance state bundle that you learned about in the previous task to save and restore the state of the app. As with a process shutdown, use <code translate="no" dir="ltr">onSaveInstanceState()</code> to put your app&#39;s data into the bundle. Then restore the data in <code translate="no" dir="ltr">onCreate()</code>, to avoid losing activity state data if the device is rotated.</p>
<ol type="1" start="6">
<li>In <code translate="no" dir="ltr">MainActivity</code>, uncomment the <code translate="no" dir="ltr">onSaveInstanceState()</code> method, run the app, click the cupcake, and rotate the app or device. Notice this time the dessert data is retained across activity rotation.</li>
</ol>


        </google-codelab-step>
      
        <google-codelab-step label="Solution code" duration="0">
          
          <p>Android Studio project:  <a href="https://github.com/google-developer-training/android-kotlin-fundamentals-apps/tree/master/DessertClickerFinal" target="_blank">DessertClickerFinal</a></p>


        </google-codelab-step>
      
        <google-codelab-step label="Summary" duration="0">
          
          <h3 is-upgraded id="lifecycle-tips" data-text="Lifecycle tips"><strong>Lifecycle tips</strong></h3>
<ul>
<li>If you set up or start something in a lifecycle callback, stop or remove that thing in the corresponding callback. By stopping the thing, you make sure it doesn&#39;t keep running when it&#39;s no longer needed. For example, if you set up a timer in <code translate="no" dir="ltr">onStart()</code>, you need to pause or stop the timer in <code translate="no" dir="ltr">onStop()</code>.</li>
<li>Use <code translate="no" dir="ltr">onCreate()</code> only to initialize the parts of your app that run once, when the app first starts. Use <code translate="no" dir="ltr">onStart()</code> to start the parts of your app that run both when the app starts, and each time the app returns to the foreground.</li>
</ul>
<h3 is-upgraded id="lifecycle-library" data-text="Lifecycle library"><strong>Lifecycle library</strong></h3>
<ul>
<li>Use the Android lifecycle library to shift lifecycle control from the activity or fragment to the actual component that needs to be lifecycle-aware.</li>
<li>Lifecycle <em>owners</em> are components that have (and thus &#34;own&#34;) lifecycles, including <code translate="no" dir="ltr">Activity</code> and <code translate="no" dir="ltr">Fragment</code>. Lifecycle owners implement the <code translate="no" dir="ltr">LifecycleOwner</code> interface.</li>
<li>Lifecycle <em>observers</em> pay attention to the current lifecycle state and perform tasks when the lifecycle changes. Lifecycle observers implement the <code translate="no" dir="ltr">LifecycleObserver</code> interface.</li>
<li><code translate="no" dir="ltr">Lifecycle</code> objects contain the actual lifecycle states, and they trigger events when the lifecycle changes.</li>
</ul>
<p>To create a lifecycle-aware class:</p>
<ul>
<li>Implement the <code translate="no" dir="ltr">LifecycleObserver</code> interface in classes that need to be lifecycle-aware.</li>
<li>Initialize a lifecycle observer class with the lifecycle object from the activity or fragment.</li>
<li>In the lifecycle observer class, annotate lifecycle-aware methods with the lifecycle state change they are interested in.</li>
</ul>
<p>For example, the <code translate="no" dir="ltr">@OnLifecycleEvent(Lifecycle.Event.ON_START)</code>annotation indicates that the method is watching the <code translate="no" dir="ltr">onStart</code> lifecycle event.</p>
<h3 is-upgraded id="process-shutdowns-and-saving-activity-state" data-text="Process shutdowns and saving activity state"><strong>Process shutdowns and saving activity state</strong></h3>
<ul>
<li>Android regulates apps running in the background so that the foreground app can run without problems. This regulation includes limiting the amount of processing that apps in the background can do, and sometimes even shutting down your entire app process.</li>
<li>The user cannot tell if the system has shut down an app in the background. The app still appears in the recents screen and should restart in the same state in which the user left it.</li>
<li>The Android Debug Bridge (<code translate="no" dir="ltr">adb</code>) is a command-line tool that lets you send instructions to emulators and devices attached to your computer. You can use <code translate="no" dir="ltr">adb</code> to simulate a process shutdown in your app.</li>
<li>When Android shuts down your app process, the <code translate="no" dir="ltr">onDestroy()</code> lifecycle method is not called. The app just stops.</li>
</ul>
<h3 is-upgraded id="preserving-activity-and-fragment-state" data-text="Preserving activity and fragment state"><strong>Preserving activity and fragment state</strong></h3>
<ul>
<li>When your app goes into the background, just after <code translate="no" dir="ltr">onStop()</code> is called, app data is saved to a bundle. Some app data, such as the contents of an <code translate="no" dir="ltr">EditText</code>, is automatically saved for you.</li>
<li>The bundle is an instance of <code translate="no" dir="ltr">Bundle</code>, which is a collection of keys and values. The keys are always strings.</li>
<li>Use the <code translate="no" dir="ltr">onSaveInstanceState()</code> callback to save other data to the bundle that you want to retain, even if the app was automatically shut down. To put data into the bundle, use the bundle methods that start with <code translate="no" dir="ltr">put</code>, such as <code translate="no" dir="ltr">putInt()</code>.</li>
<li>You can get data back out of the bundle in the <code translate="no" dir="ltr">onRestoreInstanceState()</code> method, or more commonly in <code translate="no" dir="ltr">onCreate()</code>. The <code translate="no" dir="ltr">onCreate()</code> method has a <code translate="no" dir="ltr">savedInstanceState</code> parameter that holds the bundle.</li>
<li>If the <code translate="no" dir="ltr">savedInstanceState</code> variable contains <code translate="no" dir="ltr">null</code>, the activity was started without a state bundle and there is no state data to retrieve.</li>
<li>To retrieve data from the bundle with a key, use the <code translate="no" dir="ltr">Bundle</code> methods that start with <code translate="no" dir="ltr">get</code>, such as <code translate="no" dir="ltr">getInt()</code>.</li>
</ul>
<h3 is-upgraded id="configuration-changes" data-text="Configuration changes"><strong>Configuration changes</strong></h3>
<ul>
<li>A <em>configuration change</em> happens when the state of the device changes so radically that the easiest way for the system to resolve the change is to shut down and rebuild the activity.</li>
<li>The most common example of a configuration change is when the user rotates the device from portrait to landscape mode, or from landscape to portrait mode. A configuration change can also occur when the device language changes or a hardware keyboard is plugged in.</li>
<li>When a configuration change occurs, Android invokes all the activity lifecycle&#39;s shutdown callbacks. Then Android restarts the activity from scratch, running all the lifecycle startup callbacks.</li>
<li>When Android shuts down an app because of a configuration change, it restarts the activity with the state bundle that is available to <code translate="no" dir="ltr">onCreate()</code>.</li>
<li>As with process shutdown, save your app&#39;s state to the bundle in <code translate="no" dir="ltr">onSaveInstanceState()</code>.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Learn more" duration="0">
          
          <p>Udacity course:</p>
<ul>
<li><a href="https://www.udacity.com/course/developing-android-apps-with-kotlin--ud9012" target="_blank">Developing Android Apps with Kotlin</a></li>
</ul>
<p>Android developer documentation:</p>
<ul>
<li><a href="http://developer.android.com/guide/components/activities.html" target="_blank">Activities</a> (API guide)</li>
<li><a href="http://developer.android.com/reference/kotlin/android/app/Activity.html" target="_blank"><code translate="no" dir="ltr">Activity</code></a> (API reference)</li>
<li><a href="https://developer.android.com/guide/components/activities/activity-lifecycle" target="_blank">Understand the Activity Lifecycle</a></li>
<li><a href="https://developer.android.com/topic/libraries/architecture/lifecycle" target="_blank">Handling Lifecycles with Lifecycle-Aware Components</a></li>
<li><a href="https://developer.android.com/reference/android/arch/lifecycle/LifecycleOwner.html" target="_blank"><code translate="no" dir="ltr">LifecycleOwner</code></a></li>
<li><a href="https://developer.android.com/reference/android/arch/lifecycle/Lifecycle.html" target="_blank"><code translate="no" dir="ltr">Lifecycle</code></a></li>
<li><a href="https://developer.android.com/reference/android/arch/lifecycle/LifecycleObserver.html" target="_blank"><code translate="no" dir="ltr">LifecycleObserver</code></a></li>
<li><a href="https://developer.android.com/reference/android/app/Activity#onSaveInstanceState(android.os.Bundle)" target="_blank"><code translate="no" dir="ltr">onSaveInstanceState()</code></a></li>
<li><a href="https://developer.android.com/guide/topics/resources/runtime-changes" target="_blank">Handle configuration changes</a></li>
<li><a href="https://developer.android.com/topic/libraries/architecture/saving-states.html" target="_blank">Saving UI States</a></li>
</ul>
<p>Other:</p>
<ul>
<li><a href="https://github.com/JakeWharton/timber" target="_blank">Timber</a> (GitHub)</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Homework" duration="0">
          
          <p>This section lists possible homework assignments for students who are working through this codelab as part of a course led by an instructor. It&#39;s up to the instructor to do the following:</p>
<ul>
<li>Assign homework if required.</li>
<li>Communicate to students how to submit homework assignments.</li>
<li>Grade the homework assignments.</li>
</ul>
<p>Instructors can use these suggestions as little or as much as they want, and should feel free to assign any other homework they feel is appropriate.</p>
<p>If you&#39;re working through this codelab on your own, feel free to use these homework assignments to test your knowledge.</p>
<h2 is-upgraded id="change-an-app" data-text="Change an app"><strong>Change an app</strong></h2>
<p>Open the DiceRoller app from Lesson 1. (You can  <a href="https://github.com/google-developer-training/android-kotlin-fundamentals-apps/tree/master/DiceRollerFinal" target="_blank">download the app here</a> if you don&#39;t have it.)  Compile and run the app, and note that if you rotate the device, the current value of the dice is lost. Implement <code translate="no" dir="ltr">onSaveInstanceState()</code> to retain that value in the bundle, and restore that value in <code translate="no" dir="ltr">onCreate()</code>.</p>
<h2 is-upgraded id="answer-these-questions" data-text="Answer these questions"><strong>Answer these questions</strong></h2>
<h3 is-upgraded id="question-1" data-text="Question 1"><strong>Question 1</strong></h3>
<p>Your app contains a physics simulation that requires heavy computation to display. Then the user gets a phone call. Which of the following is true?</p>
<ul>
<li>During the phone call, you should continue computing the positions of objects in the physics simulation.</li>
<li>During the phone call, you should stop computing the positions of objects in the physics simulation.</li>
</ul>
<h3 is-upgraded id="question-2" data-text="Question 2"><strong>Question 2</strong></h3>
<p>Which lifecycle method should you override to pause the simulation when the app is not on the screen?</p>
<ul>
<li><code translate="no" dir="ltr">onDestroy()</code></li>
<li><code translate="no" dir="ltr">onStop()</code></li>
<li><code translate="no" dir="ltr">onPause()</code></li>
<li><code translate="no" dir="ltr">onSaveInstanceState()</code></li>
</ul>
<h3 is-upgraded id="question-3" data-text="Question 3"><strong>Question 3</strong></h3>
<p>To make a class lifecycle-aware through the Android lifecycle library, which interface should the class implement?</p>
<ul>
<li><code translate="no" dir="ltr">Lifecycle</code></li>
<li><code translate="no" dir="ltr">LifecycleOwner</code></li>
<li><code translate="no" dir="ltr">Lifecycle.Event</code></li>
<li><code translate="no" dir="ltr">LifecycleObserver</code></li>
</ul>
<h3 is-upgraded id="question-4" data-text="Question 4">Question 4</h3>
<p>Under which circumstances does the <code translate="no" dir="ltr">onCreate()</code> method in your activity receive a <code translate="no" dir="ltr">Bundle</code> with data in it (that is, the <code translate="no" dir="ltr">Bundle</code> is not <code translate="no" dir="ltr">null</code>)?</p>
<ul>
<li>The activity is restarted after the device is rotated.</li>
<li>The activity is started from scratch.</li>
<li>The activity is resumed after returning from the background.</li>
<li>The device is rebooted.</li>
</ul>


        </google-codelab-step>
      
        <google-codelab-step label="Next codelab" duration="0">
          
          <p>Start the next lesson:  <a href="https://codelabs.developers.google.com/codelabs/kotlin-android-training-view-model/" target="_blank"><paper-button class="colored" raised>ViewModel and ViewModelFactory</paper-button></a></p>
<p>For links to other codelabs in this course, see the  <a href="https://codelabs.developers.google.com/android-kotlin-fundamentals/" target="_blank">Android Kotlin Fundamentals codelabs landing page</a>.</p>


        </google-codelab-step>
      
    </google-codelab>
  
    

    
  </div>

  

  
    
    
    
  

  
  
</article>




            
          </devsite-content>
        </main>
        <devsite-footer-promos class="devsite-footer">
          
            

<nav class="devsite-footer-promos nocontent" aria-label="Promosi">
  <ul class="devsite-footer-promos-list">
    
    <li class="devsite-footer-promo">
      <a href="//twitter.com/AndroidDev"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer Twitter Promo"
       >
        
        
        <img class="devsite-footer-promo-icon"
             src="/_static/android/images/logo-twitter.svg"
             loading="lazy"
             alt="Twitter">
        
        Twitter
      </a>
      <div class="devsite-footer-promo-description">Ikuti @AndroidDev di Twitter</div>
    </li>
    
    <li class="devsite-footer-promo">
      <a href="//www.youtube.com/user/androiddevelopers"
         class="devsite-footer-promo-title gc-analytics-event"
         data-category="Site-Wide Custom Events"
       
       
         data-label="Footer YouTube Promo"
       >
        
        
        <img class="devsite-footer-promo-icon"
             src="//www.gstatic.com/images/icons/material/product/2x/youtube_48dp.png"
             loading="lazy"
             alt="YouTube">
        
        YouTube
      </a>
      <div class="devsite-footer-promo-description">Lihat Developer Android di YouTube</div>
    </li>
    
  </ul>
</nav>

          
        </devsite-footer-promos>
        <devsite-footer-linkboxes class="devsite-footer">
          
            
<nav class="devsite-footer-linkboxes nocontent" aria-label="Link footer">
  
  <ul class="devsite-footer-linkboxes-list">
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Selengkapnya tentang Android</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
          
            Android
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/enterprise/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
          
            Enterprise
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//www.android.com/security-center/"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
          
            Keamanan
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//source.android.com"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
          
            Source
          
          </a>
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Dukungan</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=190923&amp;template=841312"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
          
            Laporkan bug platform
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//issuetracker.google.com/issues/new?component=192697"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
          
            Laporkan bug dokumentasi
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="//support.google.com/googleplay/android-developer"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
          
            Google Play support
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="https://google.qualtrics.com/jfe/form/SV_ewWXIoEVLBcyp7f??reserved=1&amp;utm_source=FooterLink&amp;Q_Language=en&amp;utm_medium=own_srch&amp;utm_campaign=developer.android.com&amp;utm_term=0&amp;utm_content=0&amp;productTag=reg&amp;campaignDate=may19&amp;pType=devel&amp;referral_code=gV420370"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
          
            Bergabung dengan studi riset
          
          </a>
          
        </li>
        
      </ul>
    </li>
    
    <li class="devsite-footer-linkbox ">
    <h3 class="devsite-footer-linkbox-heading no-link">Dokumentasi</h3>
      <ul class="devsite-footer-linkbox-list">
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/guide"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 1)"
            >
          
            Panduan developer
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/design"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 2)"
            >
          
            Panduan desain
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/reference"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 3)"
            >
          
            Referensi API
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/samples"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 4)"
            >
          
            Sampel
          
          </a>
          
        </li>
        
        <li class="devsite-footer-linkbox-item">
          
          <a href="/studio/intro"
             class="devsite-footer-linkbox-link gc-analytics-event"
             data-category="Site-Wide Custom Events"
            
             data-label="Footer Link (index 5)"
            >
          
            Android Studio
          
          </a>
          
        </li>
        
      </ul>
    </li>
    
  </ul>
  
</nav>
          
        </devsite-footer-linkboxes>
        <devsite-footer-utility class="devsite-footer">
          
            

<div class="devsite-footer-utility nocontent">
  
  
  <nav class="devsite-footer-sites" aria-label="Situs Google Developers lain">
    <a href="https://developers.google.com/"
       class="devsite-footer-sites-logo-link gc-analytics-event"
       data-category="Site-Wide Custom Events"
       data-label="Footer Google Developers Link">
      <img class="devsite-footer-sites-logo"
           src="https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/lockup-developers.svg"
           loading="lazy"
           alt="Google Developers">
    </a>
    <ul class="devsite-footer-sites-list">
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.android.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Android Link"
         
         >
          Android
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developer.chrome.com/home"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Chrome Link"
         
         >
          Chrome
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//firebase.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Firebase Link"
         
         >
          Firebase
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//cloud.google.com"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer Google Cloud Platform Link"
         
         >
          Google Cloud Platform
        </a>
      </li>
      
      <li class="devsite-footer-sites-item">
        <a href="//developers.google.com/products/"
           class="devsite-footer-sites-link
                  gc-analytics-event"
           data-category="Site-Wide Custom Events"
         
           data-label="Footer All products Link"
         
         >
          Semua produk
        </a>
      </li>
      
    </ul>
  </nav>
  

  
  <nav class="devsite-footer-utility-links" aria-label="Link utilitas">
    
    <ul class="devsite-footer-utility-list">
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="//policies.google.com/privacy"
           data-category="Site-Wide Custom Events"
           data-label="Footer Privacy link"
         >
          Privasi
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/license"
           data-category="Site-Wide Custom Events"
           data-label="Footer License link"
         >
          Lisensi
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 ">
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/distribute/marketing-tools/brand-guidelines"
           data-category="Site-Wide Custom Events"
           data-label="Footer Brand guidelines link"
         >
          Pedoman brand
        </a>
        
      </li>
      
      <li class="devsite-footer-utility-item
                 devsite-footer-utility-button">
        
        <span class="devsite-footer-utility-description">Dapatkan berita dan tips melalui email</span>
        
        
        <a class="devsite-footer-utility-link gc-analytics-event"
           href="/updates"
           data-category="Site-Wide Custom Events"
           data-label="Footer Subscribe link"
         >
          Berlangganan
        </a>
        
      </li>
      
    </ul>
    
    
    
<devsite-language-selector>
  <devsite-select class="devsite-language-selector-menu">
    
    <select aria-label="Pilih preferensi bahasa Anda."
            class="devsite-language-selector-select"
            name="language"
            track-name="click"
            track-type="languageSelector">
    
    
      <option value="en"
              lang="en"
              track-metadata-original-language="id"
              track-metadata-selected-language="en"
              track-name="changed"
              track-type="languageSelector"
            >
        English
      </option>
    
      <option value="id"
              lang="id"
              track-metadata-original-language="id"
              track-metadata-selected-language="id"
              track-name="changed"
              track-type="languageSelector"
            
              selected="selected"
            >
        Bahasa Indonesia
      </option>
    
      <option value="es_419"
              lang="es_419"
              track-metadata-original-language="id"
              track-metadata-selected-language="es_419"
              track-name="changed"
              track-type="languageSelector"
            >
        Español – América Latina
      </option>
    
      <option value="pt_br"
              lang="pt_br"
              track-metadata-original-language="id"
              track-metadata-selected-language="pt_br"
              track-name="changed"
              track-type="languageSelector"
            >
        Português – Brasil
      </option>
    
      <option value="zh_cn"
              lang="zh_cn"
              track-metadata-original-language="id"
              track-metadata-selected-language="zh_cn"
              track-name="changed"
              track-type="languageSelector"
            >
        中文 – 简体
      </option>
    
      <option value="ja"
              lang="ja"
              track-metadata-original-language="id"
              track-metadata-selected-language="ja"
              track-name="changed"
              track-type="languageSelector"
            >
        日本語
      </option>
    
      <option value="ko"
              lang="ko"
              track-metadata-original-language="id"
              track-metadata-selected-language="ko"
              track-name="changed"
              track-type="languageSelector"
            >
        한국어
      </option>
    
    </select>
  </devsite-select>
</devsite-language-selector>

  </nav>
</div>
          
        </devsite-footer-utility>
        <devsite-panel></devsite-panel>
      </section></section>
    <devsite-sitemask></devsite-sitemask>
    
<devsite-snackbar 
                  ></devsite-snackbar>

    <devsite-tooltip ></devsite-tooltip>
    <devsite-heading-link></devsite-heading-link>
    <devsite-analytics enable-analytics-iframe>
      
        <script type="application/json" analytics>[{"gaid": "UA-5831155-1", "dimensions": {"dimension4": "Developer Android", "dimension1": "Signed In", "dimension6": "en", "dimension3": false, "dimension5": "id", "dimension11": false}, "metrics": {"ratings_value": "metric1", "ratings_count": "metric2"}}]</script>
<script type="application/json" gtm>{"parameters": {"freeTrialEligibleUser": "False", "internalUser": "False", "language": {"machineTranslated": "False", "requested": "id", "served": "en"}, "pageType": "codelab", "projectName": "Developer Android", "signedIn": "True", "tenant": "android", "recommendations": {"sourcePage": "", "sourceType": 0, "sourceRank": 0, "sourceIdenticalDescriptions": 0, "sourceTitleWords": 0, "sourceDescriptionWords": 0, "experiment": ""}}, "tags": ["GTM-KMSWPCJ"]}</script>
      
    </devsite-analytics>
    
      <devsite-badger></devsite-badger>
    
    
<android-fully-clickable target=".fully-clickable" watch="devsite-content"></android-fully-clickable>
    <script nonce="7v60dAZd1HFBy60u8cnss7+GBHaymo">
  
  (function(d,e,v,s,i,t,E){d['GoogleDevelopersObject']=i;
    t=e.createElement(v);t.async=1;t.src=s;E=e.getElementsByTagName(v)[0];
    E.parentNode.insertBefore(t,E);})(window, document, 'script',
    'https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/js/app_loader.js', '[3,"id",null,"/js/devsite_app_module.js","https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388","https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android","https://android-dot-devsite-v2-prod.appspot.com",1,null,["/_pwa/android/manifest.json","https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/images/video-placeholder.svg","https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/favicon.png","https://www.gstatic.com/devrel-devsite/prod/v854c54f3442b5b06d97cb2bf43f3647f489796c80c33899ecd29b91ae5303388/android/images/lockup.svg","https://fonts.googleapis.com/css?family=Roboto:300,400,400italic,500,500italic,700,700italic|Roboto+Mono:400,500,700&display=swap"],1,null,[1,6,8,12,14,17,21,25,40,50,63,70,75,76,80,87,88,91,92,93,97,98,100,101,102,103,104,105,107,108,111,112,113,115,117,118,120,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,138,147,148],"AIzaSyAP-jjEJBzmIyKR4F-3XITp8yM9T1gEEI8","AIzaSyB6xiKGDR5O3Ak2okS4rLkauxGUG7XP0hg"]')
  
</script>
    <devsite-a11y-announce></devsite-a11y-announce>
  </body>
</html>